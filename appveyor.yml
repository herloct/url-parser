version: '1.0.0-beta3.{build}'

clone_folder: C:\Users\appveyor\go\src\github.com\herloct\url-parser

artifacts:
  - path: build
    name: binary

before_build:
  - go env
  - go test -v

build_script:
  - go build -o build\url-parser.exe

test_script:
  - bash -lc "build/url-parser.exe --help || echo \"Shows the help\""
  - bash -lc "build/url-parser.exe || echo \"This should be failed\""

  - build\url-parser.exe "https://google.com"
  - build\url-parser.exe --part=all "https://google.com"
  - build\url-parser.exe --part=scheme "https://google.com"
